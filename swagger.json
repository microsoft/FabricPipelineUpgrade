{
  "comment": "THIS IS TOTALLY NOT READY. IT IS A WORK IN PROGRESS!",

  "swagger": "2.0",
  "info": {
    "title": "FabricUpgradePublicApi",
    "version": "2024-05-23"
  },
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/workspaces/{workspaceId}/fabricUpgrader/upgradePackage": {
      "post": {
        "operationId": "FabricUpgrade_UpgradePackage",
        "x-ms-examples": {
        },
        "description": "Upgrade an ADF Pipeline to a Fabric Pipeline.",
        "parameters": [
          {
            "$ref": "#/parameters/workspaceId"
          },
          {
            "name": "upgradeRequest",
            "description": "Upgrade request.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/FabricUpgradeRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK.",
            "schema": {
              "$ref": "#/definitions/FabricUpgradeResponse"
            }
          },
          "default": {
            "description": "An error response received from Fabric Upgrader.",
            "schema": {
              "$ref": "#/definitions/FabricUpgradeErrorResponse"
            }
          }
        }
      }
    }
  },
  "parameters": {
    "workspaceId": {
      "name": "workspaceId",
      "description": "The workspace identifier.",
      "in": "path",
      "required": true,
      "type": "string"
    }
  },

  "definitions": {


    "FabricUpgradeRequest": {
      "description": "A request for a FabricUpgrade operation",
      "type": "object",
      "properties": {
        "upgradeMode": {
          "description": "What kind of operation to perform.",
          "type": "string",
          "enum": [
            "Execute",
            "WhatIf"
          ],
          "x-ms-enum": {
            "name": "FabricUpgradeMode",
            "modelAsString": true
          }
        },
        "options": {
          "description": "Free-form option dictionary",
          "type": "object"
        },
        "resolutions": {
          "description": "TODO",
          "type": "array",
          "items": {
            "$ref": "#/definitions/FabricUpgradeResolution"
          }
        },
        "packageFormat": {
          "description": "TODO",
          "type": "string",
          "enum": [
            "AdfSupportFiles"
          ],
          "x-ms-enum": {
            "name": "UpgradePackageFormat",
            "modelAsString": true
          }
        },
        "package": {
          "description": "The output of, e.g., ADF Export support files in base64 encoding.",
          "type": "string",
          "format": "byte"
        }
      }
    },
    "FabricUpgradeResolution": {
      "description": "TODO",
      "type": "object",
      "properties": {
        "type": {
          "description": "TODO",
          "type": "string",
          "enum": [
            "LinkedServiceToConnection",
            "UrlHostToConnection",
            "CredentialConnection"
          ],
          "x-ms-enum": {
            "name": "FabricUpgradeRequestResolutionType",
            "modelAsString": true
          }
        },
        "key": {
          "description": "Depends on the type. Can be the name of the ADF Connection or the HostName.",
          "type": "string"
        },
        "value": {
          "description": "The GUID of the Fabric resource.",
          "type": "string",
          "format": "uuid"
        }
      }
    },


    "FabricUpgradeResponse": {
      "description": "Response from a FabricUpgrade operation",
      "type": "object",
      "properties": {
        "state": {
          "description": "The description of the pipeline.",
          "type": "string",
          "enum": [
            "Succeeded",
            "Failed"
          ],
          "x-ms-enum": {
            "name": "UpgradeState",
            "modelAsString": true
          }
        },
        "alerts": {
          "description": "Alerts generated by the Upgrade.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/FabricUpgradeAlert"
          }
        }
      }
    },
    "FabricUpgradeAlert": {
      "description": "An alert (error or warning) generate by the Upgrader.",
      "type": "object",
      "properties": {
        "severity": {
          "description": "TODO",
          "type": "string",
          "enum": [
            "Warning",
            "RequiresUserAction",
            "UnsupportedResource",
            "Permanent"
          ],
          "x-ms-enum": {
            "name": "UpgradeAlertSeverity",
            "modelAsString": true
          }
        },
        "details": {
          "description": "TODO",
          "type": "string"
        },
        "connectionHints": {
          "description": "TODO",
          "$ref": "#/definitions/ConnectionHint"
        }
      }
    },
    "ConnectionHint": {
      "description": "TODO",
      "type": "object",
      "properties": {
        "linkedServiceName": {
          "description": "TODO",
          "type": "string"
        },
        "resolutionType": {
          "description": "This enumeration must match the one in the FabricUpgradeRequest.",
          "type": "string",
          "enum": [
            "LinkedServiceToConnection",
            "UrlHostToConnection",
            "CredentialConnection"
          ],
          "x-ms-enum": {
            "name": "FabricUpgradeResponseResolutionType",
            "modelAsString": true
          }
        },
        "connectionType": {
          "description": "TODO",
          "type": "string"
        },
        "datasource": {
          "description": "TODO",
          "type": "string"
        }
      }
    },


    "FabricUpgradeErrorResponse": {
      "description": "This is the format of the errors returned from PublicAPI.",
      "type": "object",
      "properties": {
        "requestId": {
          "type": "string",
          "format": "uuid"
        },
        "errorCode": {
          "type": "string"
        },
        "message": {
          "description": "Deserialize this into a FabricUpgradeResponse!",
          "type": "string"
        }
      }
    }


  }
}